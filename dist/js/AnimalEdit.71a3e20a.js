(window["webpackJsonp"]=window["webpackJsonp"]||[]).push([["AnimalEdit"],{"0601":function(t,e,a){"use strict";var i=a("179f"),n=a.n(i);n.a},"158f":function(t,e,a){t.exports=a.p+"img/donkey.04c9f50d.jpg"},"179f":function(t,e,a){},"2fe6":function(t,e,a){t.exports=a.p+"img/dog.9b79b5d7.jpg"},"710a":function(t,e,a){var i={"./add-animal.jpg":"f322","./cat.jpg":"927c","./cow.jpg":"c666","./dog.jpg":"2fe6","./donkey.jpg":"158f","./error.jpg":"f6de","./horse.jpg":"c295","./login.jpg":"d0cf","./other.jpg":"ac76","./pig.jpg":"cd2c","./register.jpg":"89ea"};function n(t){var e=o(t);return a(e)}function o(t){if(!a.o(i,t)){var e=new Error("Cannot find module '"+t+"'");throw e.code="MODULE_NOT_FOUND",e}return i[t]}n.keys=function(){return Object.keys(i)},n.resolve=o,t.exports=n,n.id="710a"},"7e72":function(t,e,a){"use strict";a.d(e,"a",(function(){return i}));const i=async(t,e,a=!1)=>{t.$store.dispatch("togLoading",{loadingStatus:!0});try{const i=await t.$swal.fire({title:"Are you sure?",text:"You won't be able to revert this animal deletion!",icon:"warning",showCancelButton:!0,confirmButtonColor:"#0457E7",cancelButtonColor:"#D62E1F",confirmButtonText:"Yes, delete it!"});if(!i.isConfirmed)return void t.$store.dispatch("togLoading",{loadingStatus:!1});await t.$store.dispatch({type:"deleteAnimal",animalId:e}),a||t.$router.push({name:"AnimalsList"})}catch(i){t.$swal.fire({title:"Error: animal not deleted!",text:"Please try again at a later time.",confirmButtonColor:"#D62E1F",icon:"error",width:600,padding:"3em",background:"#fff"})}t.$store.dispatch("togLoading",{loadingStatus:!1})}},"89ea":function(t,e,a){t.exports=a.p+"img/register.e3ace350.jpg"},"927c":function(t,e,a){t.exports=a.p+"img/cat.3537598e.jpg"},ac76:function(t,e,a){t.exports=a.p+"img/other.64cf9054.jpg"},c295:function(t,e,a){t.exports=a.p+"img/horse.6b477ac1.jpg"},c317:function(t,e,a){"use strict";a.r(e);var i=function(){var t=this,e=t.$createElement,i=t._self._c||e;return i("div",[i("h1",{staticClass:"page-title"},[t._v("Animal Edit")]),t.animal?i("v-card",{staticClass:"mx-auto",attrs:{"max-width":"1032"}},[i("v-list-item",[i("v-list-item-avatar",{attrs:{color:"grey"}}),i("v-list-item-content",[i("v-list-item-title",{staticClass:"headline"},[t._v(" "+t._s(t.animal.name)+" ")])],1)],1),i("v-img",{attrs:{src:t.animal.image_url?t.animal.image_url:a("710a")("./"+t.animal.type.toLowerCase()+".jpg"),alt:"Avatar","max-height":"500"}}),i("v-form",{ref:"myForm",attrs:{"lazy-validation":""},model:{value:t.valid,callback:function(e){t.valid=e},expression:"valid"}},[i("v-text-field",{attrs:{counter:10,rules:t.nameRules,label:"Name",required:""},model:{value:t.newAnimalName,callback:function(e){t.newAnimalName=e},expression:"newAnimalName"}}),i("v-select",{attrs:{items:t.items,rules:[function(t){return!!t||"Type is required"}],label:"Type",required:""},model:{value:t.newAnimalType,callback:function(e){t.newAnimalType=e},expression:"newAnimalType"}}),i("v-btn",{staticClass:"validate-btn",attrs:{disabled:!t.valid,color:"success",width:"100%","max-width":"130"},on:{click:t.validate}},[t._v(" Edit ")]),i("v-btn",{staticClass:"reset-form-btn",attrs:{color:"error",width:"100%","max-width":"130"},on:{click:t.reset}},[t._v(" Reset Form ")]),i("v-btn",{staticClass:"reset-validation-btn",attrs:{color:"warning",width:"100%","max-width":"178"},on:{click:t.resetValidation}},[t._v(" Reset Validation ")])],1),i("v-card-actions",[i("v-btn",{attrs:{text:"",color:"info accent-4"},on:{click:t.pushToAddAnimalPage}},[t._v(" Add Animal ")]),i("v-btn",{attrs:{text:"",color:"success accent-4"},on:{click:t.moveToAnimalDetails}},[t._v(" Details ")]),i("v-btn",{attrs:{text:"",color:"error accent-4"},on:{click:t.deleteAnimalClicked}},[t._v(" Delete ")]),i("v-spacer"),i("v-btn",{attrs:{icon:""}},[i("v-icon",[t._v("mdi-heart")])],1),i("v-btn",{attrs:{icon:""}},[i("v-icon",[t._v("mdi-share-variant")])],1)],1)],1):t._e()],1)},n=[],o=a("a6f4"),r=a("7e72"),l=Object(o["c"])({name:"AnimalEdit",setup(t,{root:e}){if("complete"!==document.readyState){e.$store.dispatch("togLoading",{loadingStatus:!0});const t=0!==e.$store.getters.getAnimals.length;t||e.$store.dispatch("fetchAnimals")}Object(o["e"])(()=>{window.onload=function(){e.$store.dispatch("togLoading",{loadingStatus:!1})}});const a=e.$route.params.animalId,i=Object(o["a"])(()=>e.$store.getters.getAnimalById(a)),n=i.value?Object(o["g"])(i.value.name):Object(o["g"])(""),l=i.value?Object(o["g"])(i.value.type):Object(o["g"])(""),s=Object(o["g"])(null),c=Object(o["g"])(!0),d=Object(o["g"])(""),m=Object(o["f"])([t=>!!t||"Name is required",t=>t&&t.length<=10||"Name must be less than 10 characters"]),u=Object(o["g"])(null),g=Object(o["f"])(["Cat","Dog","Pig","Cow","Horse","Donkey","Other"]),p=()=>{const t=s.value.validate();t&&b()},f=()=>{s.value.reset()},v=()=>{s.value.resetValidation()},b=async()=>{e.$store.dispatch("togLoading",{loadingStatus:!0});const t={_id:a,name:n.value?n.value:n,type:l.value?l.value:l,image_url:i.value.image_url?i.value.image_url:null};try{await e.$store.dispatch({type:"updateAnimal",updatedAnimalFields:t}),w()}catch(o){e.$swal.fire({title:"Error: animal not updated!",text:o.message.toString(),confirmButtonColor:"#D62E1F",icon:"error",width:600,padding:"3em",background:"#fff"})}e.$store.dispatch("togLoading",{loadingStatus:!1})};function h(){e.$router.push({path:"/animals/add"})}const w=()=>{e.$router.push({name:"AnimalDetails",params:{animalId:a}})},j=()=>{Object(r["a"])(e,a)};return{animal:i,newAnimalName:n,newAnimalType:l,myForm:s,valid:c,name:d,nameRules:m,select:u,items:g,validate:p,reset:f,resetValidation:v,pushToAddAnimalPage:h,moveToAnimalDetails:w,deleteAnimalClicked:j}}}),s=l,c=(a("0601"),a("2877")),d=Object(c["a"])(s,i,n,!1,null,"c6bb7616",null);e["default"]=d.exports},c666:function(t,e,a){t.exports=a.p+"img/cow.5b0d0b26.jpg"},cd2c:function(t,e,a){t.exports=a.p+"img/pig.dce921f5.jpg"},d0cf:function(t,e,a){t.exports=a.p+"img/login.5e32f028.jpg"},f322:function(t,e,a){t.exports=a.p+"img/add-animal.abf51dc3.jpg"},f6de:function(t,e,a){t.exports=a.p+"img/error.8f20e169.jpg"}}]);
//# sourceMappingURL=AnimalEdit.71a3e20a.js.map