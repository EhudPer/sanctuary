(window["webpackJsonp"]=window["webpackJsonp"]||[]).push([["AnimalEdit"],{"158f":function(e,t,a){e.exports=a.p+"img/donkey.04c9f50d.jpg"},"1dd9":function(e,t,a){},"2fe6":function(e,t,a){e.exports=a.p+"img/dog.9b79b5d7.jpg"},"710a":function(e,t,a){var n={"./add-animal.jpg":"f322","./cat.jpg":"927c","./cow.jpg":"c666","./dog.jpg":"2fe6","./donkey.jpg":"158f","./ehud-and-kfitz.jpg":"e401","./error.jpg":"f6de","./horse.jpg":"c295","./login.jpg":"d0cf","./other.jpg":"ac76","./pig.jpg":"cd2c","./register.jpg":"89ea"};function i(e){var t=l(e);return a(t)}function l(e){if(!a.o(n,e)){var t=new Error("Cannot find module '"+e+"'");throw t.code="MODULE_NOT_FOUND",t}return n[e]}i.keys=function(){return Object.keys(n)},i.resolve=l,e.exports=i,i.id="710a"},"7e72":function(e,t,a){"use strict";a.d(t,"a",(function(){return n}));const n=async(e,t,a=!1)=>{e.$store.dispatch("togLoading",{loadingStatus:!0});try{const n=await e.$swal.fire({title:"Are you sure?",text:"You won't be able to revert this animal deletion!",icon:"warning",showCancelButton:!0,confirmButtonColor:"#0457E7",cancelButtonColor:"#D62E1F",confirmButtonText:"Yes, delete it!"});if(!n.isConfirmed)return void e.$store.dispatch("togLoading",{loadingStatus:!1});await e.$store.dispatch({type:"deleteAnimal",animalId:t}),a||e.$router.push({name:"AnimalsList"})}catch(n){e.$swal.fire({title:"Error: animal not deleted!",text:"Please try again at a later time.",confirmButtonColor:"#D62E1F",icon:"error",width:600,padding:"3em",background:"#fff"})}e.$store.dispatch("togLoading",{loadingStatus:!1})}},"89ea":function(e,t,a){e.exports=a.p+"img/register.e3ace350.jpg"},"927c":function(e,t,a){e.exports=a.p+"img/cat.3537598e.jpg"},ac76:function(e,t,a){e.exports=a.p+"img/other.64cf9054.jpg"},c295:function(e,t,a){e.exports=a.p+"img/horse.6b477ac1.jpg"},c317:function(e,t,a){"use strict";a.r(t);var n=function(){var e=this,t=e.$createElement,n=e._self._c||t;return n("div",[e.animal?n("v-card",{staticClass:"mx-auto",attrs:{"max-width":"1032"}},[n("v-list-item",[n("v-list-item-content",[n("v-list-item-title",{staticClass:"headline"},[e._v(" "+e._s(e.animal.name)+" ")])],1)],1),e.newAnimalType?n("v-img",{style:"cursor: pointer",attrs:{src:a("710a")("./"+e.newAnimalType.toLowerCase()+".jpg"),alt:"Avatar","max-height":"500"},on:{click:e.moveToAnimalDetails}}):e._e(),n("v-form",{ref:"myForm",attrs:{"lazy-validation":""},model:{value:e.valid,callback:function(t){e.valid=t},expression:"valid"}},[n("v-text-field",{attrs:{counter:10,rules:e.nameRules,label:"Name",required:""},model:{value:e.newAnimalName,callback:function(t){e.newAnimalName=t},expression:"newAnimalName"}}),n("v-select",{attrs:{items:e.items,rules:[function(e){return!!e||"Category is required"}],label:"Category",required:""},model:{value:e.newAnimalType,callback:function(t){e.newAnimalType=t},expression:"newAnimalType"}}),n("v-select",{attrs:{items:e.medicineTypeItems,label:"Medicine Type",clearable:""},model:{value:e.newAnimalMedicineType,callback:function(t){e.newAnimalMedicineType=t},expression:"newAnimalMedicineType"}}),n("v-text-field",{attrs:{rules:[function(e){return e>=1||""===e||"Dosage must be a NUMBER that is 1 or greater"}],label:"Dosage",type:"number"},model:{value:e.newAnimalDosage,callback:function(t){e.newAnimalDosage=t},expression:"newAnimalDosage"}}),n("v-text-field",{attrs:{rules:[function(e){return e>=1&&Number.isInteger(+e)||""===e||"Frequency must be an integer NUMBER that is 1 or greater"}],label:"Frequency",type:"number"},model:{value:e.newAnimalFrequency,callback:function(t){e.newAnimalFrequency=t},expression:"newAnimalFrequency"}}),n("v-select",{attrs:{items:e.timeUnitItems,label:"Time Unit",clearable:""},model:{value:e.newAnimalTimeUnit,callback:function(t){e.newAnimalTimeUnit=t},expression:"newAnimalTimeUnit"}}),n("div",{staticClass:"btns-container"},[n("v-card-actions",[e.valid&&""!==e.newAnimalName&&""!==e.newAnimalType?n("v-btn",{staticClass:"validate-btn",attrs:{color:"success",width:"100%","max-width":"130"},on:{click:e.validate}},[e._v(" Save ")]):e._e(),n("v-btn",{attrs:{color:"error accent-4"},on:{click:e.deleteAnimalClicked}},[e._v(" Delete ")])],1)],1)],1)],1):e._e()],1)},i=[],l=a("a6f4"),o=a("7e72"),r=Object(l["c"])({name:"AnimalEdit",setup(e,{root:t}){Object(l["d"])(async()=>{"complete"!==document.readyState&&t.$store.dispatch("togLoading",{loadingStatus:!0});const e=0!==t.$store.getters.getAnimals.length;if(!e)try{await t.$store.dispatch("fetchAnimals")}catch(a){t.$swal.fire({title:"Error: animal not fetched!",text:a.message.toString(),confirmButtonColor:"#D62E1F",icon:"error",width:600,padding:"3em",background:"#fff"})}}),Object(l["e"])(()=>{window.onload=async()=>{t.$store.dispatch("togLoading",{loadingStatus:!1})}});const a=t.$route.params.animalId,n=Object(l["a"])(()=>t.$store.getters.getAnimalById(a));n.value||console.log("");const i=n.value?Object(l["g"])(n.value.name):Object(l["g"])(""),r=n.value?Object(l["g"])(n.value.type):Object(l["g"])(""),c=n.value&&n.value.medicineType?Object(l["g"])(n.value.medicineType):Object(l["g"])(""),s=n.value&&n.value.dosage?Object(l["g"])(n.value.dosage):Object(l["g"])(""),u=n.value&&n.value.frequency?Object(l["g"])(n.value.frequency):Object(l["g"])(""),m=n.value&&n.value.timeUnit?Object(l["g"])(n.value.timeUnit):Object(l["g"])(""),d=Object(l["g"])(null),g=Object(l["g"])(!0),p=Object(l["g"])(""),f=Object(l["f"])([e=>!!e||"Name is required",e=>e&&e.length<=10||"Name must be less than 10 characters"]),v=Object(l["g"])(null),b=Object(l["f"])(["Cat","Dog","Pig","Cow","Horse","Donkey","Other"]),w=Object(l["f"])(["Convenia","Superflex","Tsistophan","Cinolux","Doxilin","Activile","Other"]),y=Object(l["f"])(["Day","Week","Month","Year"]),j=()=>{const e=d.value.validate();e&&h()},h=async()=>{t.$store.dispatch("togLoading",{loadingStatus:!0});const e={_id:a,name:i.value?i.value:i,type:r.value?r.value:r,medicineType:c.value?c.value:"",dosage:s.value&&0!==s.value&&""!==s.value?+s.value:0,frequency:u.value&&0!==u.value&&""!==u.value?+u.value:0,timeUnit:m.value?m.value:"",image_url:n.value.image_url?n.value.image_url:null};try{await t.$store.dispatch({type:"updateAnimal",updatedAnimalFields:e}),x()}catch(l){t.$swal.fire({title:"Error: animal not updated!",text:l.message.toString(),confirmButtonColor:"#D62E1F",icon:"error",width:600,padding:"3em",background:"#fff"})}t.$store.dispatch("togLoading",{loadingStatus:!1})};function A(){t.$router.push({path:"/animals/add"})}const x=()=>{t.$router.push({name:"AnimalDetails",params:{animalId:a}})},O=()=>{Object(o["a"])(t,a)};return{animal:n,newAnimalName:i,newAnimalType:r,newAnimalMedicineType:c,newAnimalTimeUnit:m,newAnimalDosage:s,newAnimalFrequency:u,myForm:d,valid:g,name:p,nameRules:f,select:v,items:b,medicineTypeItems:w,timeUnitItems:y,validate:j,pushToAddAnimalPage:A,moveToAnimalDetails:x,deleteAnimalClicked:O}}}),c=r,s=(a("e374"),a("2877")),u=Object(s["a"])(c,n,i,!1,null,"595a2c81",null);t["default"]=u.exports},c666:function(e,t,a){e.exports=a.p+"img/cow.5b0d0b26.jpg"},cd2c:function(e,t,a){e.exports=a.p+"img/pig.dce921f5.jpg"},d0cf:function(e,t,a){e.exports=a.p+"img/login.5e32f028.jpg"},e374:function(e,t,a){"use strict";var n=a("1dd9"),i=a.n(n);i.a},f322:function(e,t,a){e.exports=a.p+"img/add-animal.abf51dc3.jpg"},f6de:function(e,t,a){e.exports=a.p+"img/error.8f20e169.jpg"}}]);
//# sourceMappingURL=AnimalEdit.6043fe50.js.map