{"version":3,"sources":["webpack:///./src/views/AddAnimal.vue?f8a3","webpack:///./src/views/AddAnimal.vue?ddc7","webpack:///./src/views/AddAnimal.vue","webpack:///./src/views/AddAnimal.vue?6242","webpack:///./src/views/AddAnimal.vue?4250","webpack:///./src/assets/add-animal.jpg"],"names":["render","_vm","this","_h","$createElement","_c","_self","staticClass","_v","attrs","ref","model","value","callback","$$v","valid","expression","nameRules","animalName","items","v","animalType","on","validate","staticRenderFns","name","props","root","document","readyState","$store","dispatch","loadingStatus","window","onload","myForm","length","select","addAnimal","reset","resetValidation","async","animalToCreateFields","type","image_url","result","moveToAnimalDetails","_id","toString","error","$swal","fire","title","text","message","confirmButtonColor","icon","width","padding","background","animalId","$router","push","params","component","module","exports"],"mappings":"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","file":"js/addAnimal.c11f11c8.js","sourcesContent":["import mod from \"-!../../node_modules/mini-css-extract-plugin/dist/loader.js??ref--8-oneOf-1-0!../../node_modules/css-loader/dist/cjs.js??ref--8-oneOf-1-1!../../node_modules/vue-loader/lib/loaders/stylePostLoader.js!../../node_modules/postcss-loader/src/index.js??ref--8-oneOf-1-2!../../node_modules/sass-loader/dist/cjs.js??ref--8-oneOf-1-3!../../node_modules/cache-loader/dist/cjs.js??ref--0-0!../../node_modules/vue-loader/lib/index.js??vue-loader-options!./AddAnimal.vue?vue&type=style&index=0&id=53d52576&lang=scss&scoped=true&\"; export default mod; export * from \"-!../../node_modules/mini-css-extract-plugin/dist/loader.js??ref--8-oneOf-1-0!../../node_modules/css-loader/dist/cjs.js??ref--8-oneOf-1-1!../../node_modules/vue-loader/lib/loaders/stylePostLoader.js!../../node_modules/postcss-loader/src/index.js??ref--8-oneOf-1-2!../../node_modules/sass-loader/dist/cjs.js??ref--8-oneOf-1-3!../../node_modules/cache-loader/dist/cjs.js??ref--0-0!../../node_modules/vue-loader/lib/index.js??vue-loader-options!./AddAnimal.vue?vue&type=style&index=0&id=53d52576&lang=scss&scoped=true&\"","var render = function () {var _vm=this;var _h=_vm.$createElement;var _c=_vm._self._c||_h;return _c('div',[_c('h1',{staticClass:\"page-title\"},[_vm._v(\"Add Animal\")]),_c('v-card',{staticClass:\"mx-auto\",attrs:{\"max-width\":\"1032\"}},[_c('v-list-item',[_c('v-list-item-avatar',{attrs:{\"color\":\"grey\"}})],1),_c('v-img',{attrs:{\"src\":require(\"../assets/add-animal.jpg\"),\"alt\":\"Avatar\",\"max-height\":\"500\"}}),_c('v-form',{ref:\"myForm\",staticClass:\"mb-4\",attrs:{\"lazy-validation\":\"\"},model:{value:(_vm.valid),callback:function ($$v) {_vm.valid=$$v},expression:\"valid\"}},[_c('v-text-field',{attrs:{\"counter\":10,\"rules\":_vm.nameRules,\"label\":\"Name\",\"required\":\"\"},model:{value:(_vm.animalName),callback:function ($$v) {_vm.animalName=$$v},expression:\"animalName\"}}),_c('v-select',{attrs:{\"items\":_vm.items,\"rules\":[function (v) { return !!v || 'Type is required'; }],\"label\":\"Type\",\"required\":\"\"},model:{value:(_vm.animalType),callback:function ($$v) {_vm.animalType=$$v},expression:\"animalType\"}}),_c('v-btn',{staticClass:\"validate-btn\",attrs:{\"disabled\":!_vm.valid,\"color\":\"success\",\"width\":\"100%\",\"max-width\":\"130\"},on:{\"click\":_vm.validate}},[_vm._v(\" Add \")])],1)],1)],1)}\nvar staticRenderFns = []\n\nexport { render, staticRenderFns }","\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n// @ts-nocheck\n\nimport {\n  defineComponent,\n  onMounted,\n  reactive,\n  ref,\n} from \"@vue/composition-api\";\n\nexport default defineComponent({\n  name: \"AddAnimal\",\n  setup(props, { root }) {\n    //check if i can put the code of mount and before mount in some function and only call it in all the component instead duplicate code.\n    if (document.readyState !== \"complete\") {\n      root.$store.dispatch(\"togLoading\", { loadingStatus: true });\n    }\n\n    onMounted(() => {\n      window.onload = function () {\n        root.$store.dispatch(\"togLoading\", { loadingStatus: false });\n      };\n    });\n\n    //Later try to set that when the edit page is loaded that the values of the controls will not be empty -\n    // but with the current animal's details from the db - all the time, even on refresh or loading from url directly.\n    const animalName = ref(\"\");\n    const animalType = ref(\"\");\n\n    const myForm = ref(null);\n    const valid = ref(true);\n    const name = ref(\"\");\n    const nameRules = reactive([\n      (v) => !!v || \"Name is required\",\n      (v) => (v && v.length <= 10) || \"Name must be less than 10 characters\",\n    ]);\n    const select = ref(null);\n    //later move those types of animals to one file and read them from it for all\n    //the places needed with the types list like the select box etc.\n    const items = reactive([\n      \"Cat\",\n      \"Dog\",\n      \"Pig\",\n      \"Cow\",\n      \"Horse\",\n      \"Donkey\",\n      \"Other\",\n    ]);\n\n    const validate = () => {\n      const valid = myForm.value.validate();\n      if (valid) {\n        addAnimal();\n      }\n    };\n\n    const reset = () => {\n      myForm.value.reset();\n    };\n\n    const resetValidation = () => {\n      myForm.value.resetValidation();\n    };\n\n    const addAnimal = async () => {\n      root.$store.dispatch(\"togLoading\", { loadingStatus: true });\n      const animalToCreateFields = {\n        name: animalName.value,\n        type: animalType.value,\n\n        //For now it's always null and when loading animal it will check and see that it's null so it will load default\n        // image by animal type\n        //later will add option the upload image - and if so the image cloud url will be stored here, if not - then null.\n        //Like that there will always be a pic or default or the user's uploaded picture.\n        image_url: null,\n      };\n\n      try {\n        const result = await root.$store.dispatch({\n          type: \"createAnimal\",\n          animalToCreateFields,\n        });\n\n        moveToAnimalDetails(result._id.toString());\n      } catch (error) {\n        root.$swal.fire({\n          title: \"Error: animal not created!\",\n          text: error.message.toString(),\n          confirmButtonColor: \"#D62E1F\",\n          icon: \"error\",\n          width: 600,\n          padding: \"3em\",\n          background: \"#fff\",\n        });\n      }\n      root.$store.dispatch(\"togLoading\", { loadingStatus: false });\n    };\n\n    //use it from a global function later cause it's in more than one component.\n    const moveToAnimalDetails = (animalId) => {\n      root.$router.push({\n        name: \"AnimalDetails\",\n        params: { animalId },\n      });\n    };\n\n    return {\n      animalName,\n      animalType,\n      myForm,\n      valid,\n      name,\n      nameRules,\n      select,\n      items,\n      validate,\n      reset,\n      resetValidation,\n      moveToAnimalDetails,\n    };\n  },\n});\n","import mod from \"-!../../node_modules/cache-loader/dist/cjs.js??ref--14-0!../../node_modules/thread-loader/dist/cjs.js!../../node_modules/babel-loader/lib/index.js!../../node_modules/ts-loader/index.js??ref--14-3!../../node_modules/cache-loader/dist/cjs.js??ref--0-0!../../node_modules/vue-loader/lib/index.js??vue-loader-options!./AddAnimal.vue?vue&type=script&lang=ts&\"; export default mod; export * from \"-!../../node_modules/cache-loader/dist/cjs.js??ref--14-0!../../node_modules/thread-loader/dist/cjs.js!../../node_modules/babel-loader/lib/index.js!../../node_modules/ts-loader/index.js??ref--14-3!../../node_modules/cache-loader/dist/cjs.js??ref--0-0!../../node_modules/vue-loader/lib/index.js??vue-loader-options!./AddAnimal.vue?vue&type=script&lang=ts&\"","import { render, staticRenderFns } from \"./AddAnimal.vue?vue&type=template&id=53d52576&scoped=true&\"\nimport script from \"./AddAnimal.vue?vue&type=script&lang=ts&\"\nexport * from \"./AddAnimal.vue?vue&type=script&lang=ts&\"\nimport style0 from \"./AddAnimal.vue?vue&type=style&index=0&id=53d52576&lang=scss&scoped=true&\"\n\n\n/* normalize component */\nimport normalizer from \"!../../node_modules/vue-loader/lib/runtime/componentNormalizer.js\"\nvar component = normalizer(\n  script,\n  render,\n  staticRenderFns,\n  false,\n  null,\n  \"53d52576\",\n  null\n  \n)\n\nexport default component.exports","module.exports = __webpack_public_path__ + \"img/add-animal.abf51dc3.jpg\";"],"sourceRoot":""}