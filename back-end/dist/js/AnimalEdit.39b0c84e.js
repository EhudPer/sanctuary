(window["webpackJsonp"]=window["webpackJsonp"]||[]).push([["AnimalEdit"],{"158f":function(e,t,a){e.exports=a.p+"img/donkey.04c9f50d.jpg"},"2fe6":function(e,t,a){e.exports=a.p+"img/dog.9b79b5d7.jpg"},"710a":function(e,t,a){var i={"./add-animal.jpg":"f322","./cat.jpg":"927c","./cow.jpg":"c666","./dog.jpg":"2fe6","./donkey.jpg":"158f","./error.jpg":"f6de","./horse.jpg":"c295","./login.jpg":"d0cf","./other.jpg":"ac76","./pig.jpg":"cd2c","./profile.jpg":"3a19","./register.jpg":"89ea"};function n(e){var t=o(e);return a(t)}function o(e){if(!a.o(i,e)){var t=new Error("Cannot find module '"+e+"'");throw t.code="MODULE_NOT_FOUND",t}return i[e]}n.keys=function(){return Object.keys(i)},n.resolve=o,e.exports=n,n.id="710a"},"7e72":function(e,t,a){"use strict";a.d(t,"a",(function(){return i}));const i=async(e,t,a=!1)=>{e.$store.dispatch("togLoading",{loadingStatus:!0});try{const i=await e.$swal.fire({title:"Are you sure?",text:"You won't be able to revert this animal deletion!",icon:"warning",showCancelButton:!0,confirmButtonColor:"#0457E7",cancelButtonColor:"#D62E1F",confirmButtonText:"Yes, delete it!"});if(!i.isConfirmed)return void e.$store.dispatch("togLoading",{loadingStatus:!1});await e.$store.dispatch({type:"deleteAnimal",animalId:t}),a||e.$router.push({name:"AnimalsList"})}catch(i){e.$swal.fire({title:"Error: animal not deleted!",text:"Please try again at a later time.",confirmButtonColor:"#D62E1F",icon:"error",width:600,padding:"3em",background:"#fff"})}e.$store.dispatch("togLoading",{loadingStatus:!1})}},"89ea":function(e,t,a){e.exports=a.p+"img/register.e3ace350.jpg"},"927c":function(e,t,a){e.exports=a.p+"img/cat.3537598e.jpg"},ab0a:function(e,t,a){},ac76:function(e,t,a){e.exports=a.p+"img/other.64cf9054.jpg"},b3b7:function(e,t,a){"use strict";var i=a("ab0a"),n=a.n(i);n.a},c295:function(e,t,a){e.exports=a.p+"img/horse.6b477ac1.jpg"},c317:function(e,t,a){"use strict";a.r(t);var i=function(){var e=this,t=e.$createElement,i=e._self._c||t;return i("div",[e.animal?i("v-card",{staticClass:"mx-auto",attrs:{"max-width":"1032"}},[i("v-list-item",[i("v-list-item-content",[i("v-list-item-title",{staticClass:"headline"},[e._v(" "+e._s(e.animal.name)+" ")])],1)],1),i("v-img",{style:"cursor: pointer",attrs:{src:e.animal.image_url?e.animal.image_url:a("710a")("./"+e.animal.type.toLowerCase()+".jpg"),alt:"Avatar","max-height":"500"},on:{click:e.moveToAnimalDetails}}),i("v-form",{ref:"myForm",attrs:{"lazy-validation":""},model:{value:e.valid,callback:function(t){e.valid=t},expression:"valid"}},[i("v-text-field",{attrs:{counter:10,rules:e.nameRules,label:"Name",required:""},model:{value:e.newAnimalName,callback:function(t){e.newAnimalName=t},expression:"newAnimalName"}}),i("v-select",{attrs:{items:e.items,rules:[function(e){return!!e||"Type is required"}],label:"Type",required:""},model:{value:e.newAnimalType,callback:function(t){e.newAnimalType=t},expression:"newAnimalType"}}),i("v-btn",{staticClass:"validate-btn",attrs:{disabled:!e.valid,color:"success",width:"100%","max-width":"130"},on:{click:e.validate}},[e._v(" Save ")])],1),i("v-card-actions",[i("v-btn",{attrs:{color:"error accent-4"},on:{click:e.deleteAnimalClicked}},[e._v(" Delete ")])],1)],1):e._e()],1)},n=[],o=a("a6f4"),r=a("7e72"),l=Object(o["c"])({name:"AnimalEdit",setup(e,{root:t}){if("complete"!==document.readyState){t.$store.dispatch("togLoading",{loadingStatus:!0});const e=0!==t.$store.getters.getAnimals.length;e||t.$store.dispatch("fetchAnimals")}Object(o["e"])(()=>{window.onload=function(){t.$store.dispatch("togLoading",{loadingStatus:!1})}});const a=t.$route.params.animalId,i=Object(o["a"])(()=>t.$store.getters.getAnimalById(a)),n=i.value?Object(o["g"])(i.value.name):Object(o["g"])(""),l=i.value?Object(o["g"])(i.value.type):Object(o["g"])(""),s=Object(o["g"])(null),c=Object(o["g"])(!0),d=Object(o["g"])(""),u=Object(o["f"])([e=>!!e||"Name is required",e=>e&&e.length<=10||"Name must be less than 10 characters"]),m=Object(o["g"])(null),g=Object(o["f"])(["Cat","Dog","Pig","Cow","Horse","Donkey","Other"]),p=()=>{const e=s.value.validate();e&&b()},f=()=>{s.value.reset()},v=()=>{s.value.resetValidation()},b=async()=>{t.$store.dispatch("togLoading",{loadingStatus:!0});const e={_id:a,name:n.value?n.value:n,type:l.value?l.value:l,image_url:i.value.image_url?i.value.image_url:null};try{await t.$store.dispatch({type:"updateAnimal",updatedAnimalFields:e}),j()}catch(o){t.$swal.fire({title:"Error: animal not updated!",text:o.message.toString(),confirmButtonColor:"#D62E1F",icon:"error",width:600,padding:"3em",background:"#fff"})}t.$store.dispatch("togLoading",{loadingStatus:!1})};function h(){t.$router.push({path:"/animals/add"})}const j=()=>{t.$router.push({name:"AnimalDetails",params:{animalId:a}})},w=()=>{Object(r["a"])(t,a)};return{animal:i,newAnimalName:n,newAnimalType:l,myForm:s,valid:c,name:d,nameRules:u,select:m,items:g,validate:p,reset:f,resetValidation:v,pushToAddAnimalPage:h,moveToAnimalDetails:j,deleteAnimalClicked:w}}}),s=l,c=(a("b3b7"),a("2877")),d=Object(c["a"])(s,i,n,!1,null,"3736d148",null);t["default"]=d.exports},c666:function(e,t,a){e.exports=a.p+"img/cow.5b0d0b26.jpg"},cd2c:function(e,t,a){e.exports=a.p+"img/pig.dce921f5.jpg"},d0cf:function(e,t,a){e.exports=a.p+"img/login.5e32f028.jpg"},f322:function(e,t,a){e.exports=a.p+"img/add-animal.abf51dc3.jpg"},f6de:function(e,t,a){e.exports=a.p+"img/error.8f20e169.jpg"}}]);
//# sourceMappingURL=AnimalEdit.39b0c84e.js.map